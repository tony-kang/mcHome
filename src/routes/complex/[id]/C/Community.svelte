<script>
	const facilities = [
		{ 
			icon: 'ğŸ’ª', 
			name: 'í”¼íŠ¸ë‹ˆìŠ¤ì„¼í„°', 
			desc: 'ìµœì‹  ìš´ë™ê¸°êµ¬ë¥¼ ê°–ì¶˜ í—¬ìŠ¤ì¥',
			image: '/main/story_sub_1.jpg'
		},
		{ 
			icon: 'ğŸ‘¶', 
			name: 'í‚¤ì¦ˆìŠ¤í…Œì´ì…˜', 
			desc: 'ì•ˆì „í•˜ê³  ì¦ê±°ìš´ ì–´ë¦°ì´ ë†€ì´ê³µê°„',
			image: '/main/story_sub_2.jpg'
		},
		{ 
			icon: 'ğŸ“', 
			name: 'ì–´ë¦°ì´ì§‘', 
			desc: 'êµ­ê³µë¦½ ìˆ˜ì¤€ì˜ ë³´ìœ¡ì‹œì„¤',
			image: '/main/story_sub_3.jpg'
		},
		{ 
			icon: 'ğŸ¤', 
			name: 'ë‹¤í•¨ê»˜ëŒë´„ì„¼í„°', 
			desc: 'ì•„ì´ë“¤ì„ ìœ„í•œ ë°©ê³¼í›„ ëŒë´„',
			image: '/main/story_sub_4.jpg'
		},
		{ 
			icon: 'ğŸ‘´', 
			name: 'ì‹œë‹ˆì–´í´ëŸ½', 
			desc: 'ì–´ë¥´ì‹ ë“¤ì˜ ê±´ê°•ê³¼ ì—¬ê°€í™œë™',
			image: '/main/story_main.jpg'
		},
		{ 
			icon: 'ğŸ“š', 
			name: 'ê·¸ë£¹ìŠ¤í„°ë””ë£¸', 
			desc: 'ì†Œê·œëª¨ ëª¨ì„ì„ ìœ„í•œ ê³µê°„',
			image: '/main/story_sub_1.jpg'
		},
		{ 
			icon: 'ğŸ“–', 
			name: 'ë…ì„œì‹¤', 
			desc: 'ì§‘ì¤‘ë ¥ í–¥ìƒì„ ìœ„í•œ í•™ìŠµê³µê°„',
			image: '/main/story_sub_2.jpg'
		},
		{ 
			icon: 'ğŸ’¼', 
			name: '1ì¸ ì˜¤í”¼ìŠ¤', 
			desc: 'ì¬íƒê·¼ë¬´ë¥¼ ìœ„í•œ ê°œì¸ ì‚¬ë¬´ê³µê°„',
			image: '/main/story_sub_3.jpg'
		},
		{ 
			icon: 'ğŸ¢', 
			name: 'íšŒì˜ì‹¤', 
			desc: 'ë¹„ì¦ˆë‹ˆìŠ¤ ë¯¸íŒ…ë£¸',
			image: '/main/story_sub_4.jpg'
		},
		{ 
			icon: 'ğŸ“š', 
			name: 'ì‘ì€ë„ì„œê´€', 
			desc: 'ì£¼ë¯¼ ê³µìœ  ë¶ì¹´í˜',
			image: '/main/story_main.jpg'
		},
		{ 
			icon: 'ğŸ“¦', 
			name: 'ë¬´ì¸íƒë°°í•¨', 
			desc: '24ì‹œê°„ í¸ë¦¬í•œ íƒë°° ë³´ê´€',
			image: '/main/story_sub_1.jpg'
		},
		{ 
			icon: 'ğŸŠ', 
			name: 'ê³¨í”„ì—°ìŠµì¥', 
			desc: 'ì‹¤ë‚´ ìŠ¤í¬ë¦° ê³¨í”„',
			image: '/main/story_sub_2.jpg'
		}
	];

	let selectedFacility = $state(null);

	function selectFacility(facility) {
		selectedFacility = facility;
	}

	function closeFacility() {
		selectedFacility = null;
	}
</script>

<section class="c-section community-section">
	<div class="c-container">
		<h2 class="c-section-title">í”„ë¦¬ë¯¸ì—„ ì»¤ë®¤ë‹ˆí‹°</h2>
		<p class="c-section-subtitle">
			ì…ì£¼ë¯¼ì„ ìœ„í•œ íŠ¹ë³„í•œ í¸ì˜ì‹œì„¤ì„ ê²½í—˜í•˜ì„¸ìš”
		</p>

		<div class="facilities-grid">
			{#each facilities as facility}
				<button class="facility-card" onclick={() => selectFacility(facility)}>
					<div class="facility-icon">{facility.icon}</div>
					<h3 class="facility-name">{facility.name}</h3>
					<p class="facility-desc">{facility.desc}</p>
					<div class="facility-more">
						<span>ìì„¸íˆ ë³´ê¸°</span>
						<svg width="20" height="20" viewBox="0 0 20 20" fill="none">
							<path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</div>
				</button>
			{/each}
		</div>

		<!-- ì£¼ê±° ì„œë¹„ìŠ¤ ì•ˆë‚´ -->
		<div class="service-notice">
			<div class="notice-icon">
				<svg width="48" height="48" viewBox="0 0 48 48" fill="none">
					<circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="3" fill="none"/>
					<path d="M24 14V26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
					<circle cx="24" cy="32" r="2" fill="currentColor"/>
				</svg>
			</div>
			<div class="notice-content">
				<h3>ë‹¨ì§€ ì£¼ê±°ì„œë¹„ìŠ¤ ì•ˆë‚´</h3>
				<p>ë‹¨ì§€ ì£¼ê±°ì„œë¹„ìŠ¤ëŠ” ì¶”í›„ ì•ˆë‚´ ì˜ˆì •ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë¶„ì–‘ ìƒë‹´ì„ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
			</div>
		</div>
	</div>
</section>

<!-- ì‹œì„¤ ìƒì„¸ ëª¨ë‹¬ -->
{#if selectedFacility}
	<!-- svelte-ignore a11y_click_events_have_key_events -->
	<!-- svelte-ignore a11y_no_static_element_interactions -->
	<div class="facility-modal" onclick={closeFacility}>
		<div class="modal-content" onclick={(e) => e.stopPropagation()}>
			<button class="modal-close" onclick={closeFacility} aria-label="ë‹«ê¸°">
				<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
					<path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
				</svg>
			</button>
			<div class="modal-image">
				<img src={selectedFacility.image} alt={selectedFacility.name} />
			</div>
			<div class="modal-info">
				<div class="modal-icon">{selectedFacility.icon}</div>
				<h2>{selectedFacility.name}</h2>
				<p>{selectedFacility.desc}</p>
				<button class="c-btn c-btn-primary" onclick={closeFacility}>í™•ì¸</button>
			</div>
		</div>
	</div>
{/if}

<style>
	.community-section {
		background: white;
	}

	.facilities-grid {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 25px;
		margin-bottom: 60px;
	}

	.facility-card {
		background: white;
		border: 2px solid var(--border-color);
		border-radius: 8px;
		padding: 30px 20px;
		text-align: center;
		cursor: pointer;
		transition: all 0.3s ease;
	}

	.facility-card:hover {
		border-color: var(--primary-color);
		transform: translateY(-5px);
		box-shadow: var(--shadow-md);
	}

	.facility-icon {
		font-size: 3rem;
		margin-bottom: 15px;
	}

	.facility-name {
		font-size: 1.1rem;
		font-weight: 700;
		color: var(--text-dark);
		margin: 0 0 10px 0;
	}

	.facility-desc {
		font-size: 0.9rem;
		color: var(--text-gray);
		line-height: 1.5;
		margin: 0 0 15px 0;
	}

	.facility-more {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 5px;
		color: var(--primary-color);
		font-size: 0.9rem;
		font-weight: 600;
	}

	.service-notice {
		display: flex;
		gap: 25px;
		padding: 40px;
		background: var(--bg-light);
		border-left: 4px solid var(--secondary-color);
		border-radius: 8px;
	}

	.notice-icon {
		color: var(--secondary-color);
		flex-shrink: 0;
	}

	.notice-content h3 {
		font-size: 1.3rem;
		font-weight: 700;
		color: var(--text-dark);
		margin: 0 0 10px 0;
	}

	.notice-content p {
		font-size: 1rem;
		color: var(--text-gray);
		line-height: 1.6;
		margin: 0;
	}

	/* ëª¨ë‹¬ */
	.facility-modal {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.7);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 1000;
		padding: 20px;
		animation: fadeIn 0.3s ease;
	}

	@keyframes fadeIn {
		from { opacity: 0; }
		to { opacity: 1; }
	}

	.modal-content {
		background: white;
		border-radius: 12px;
		max-width: 600px;
		width: 100%;
		overflow: hidden;
		animation: slideUp 0.3s ease;
	}

	@keyframes slideUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.modal-close {
		position: absolute;
		top: 20px;
		right: 20px;
		width: 36px;
		height: 36px;
		background: rgba(255, 255, 255, 0.9);
		border: none;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		z-index: 1;
		transition: all 0.3s ease;
	}

	.modal-close:hover {
		background: white;
		transform: rotate(90deg);
	}

	.modal-image {
		position: relative;
		width: 100%;
		aspect-ratio: 16/9;
		overflow: hidden;
	}

	.modal-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.modal-info {
		padding: 40px;
		text-align: center;
	}

	.modal-icon {
		font-size: 4rem;
		margin-bottom: 20px;
	}

	.modal-info h2 {
		font-size: 1.8rem;
		font-weight: 700;
		color: var(--text-dark);
		margin: 0 0 15px 0;
	}

	.modal-info p {
		font-size: 1.1rem;
		color: var(--text-gray);
		line-height: 1.6;
		margin: 0 0 30px 0;
	}

	/* ë°˜ì‘í˜• */
	@media (max-width: 1024px) {
		.facilities-grid {
			grid-template-columns: repeat(3, 1fr);
		}
	}

	@media (max-width: 768px) {
		.facilities-grid {
			grid-template-columns: repeat(2, 1fr);
			gap: 20px;
		}

		.facility-card {
			padding: 25px 15px;
		}

		.facility-icon {
			font-size: 2.5rem;
		}

		.service-notice {
			flex-direction: column;
			padding: 30px;
		}

		.modal-info {
			padding: 30px 20px;
		}
	}

	@media (max-width: 480px) {
		.facilities-grid {
			grid-template-columns: 1fr;
		}

		.facility-card {
			padding: 25px 20px;
		}

		.service-notice {
			padding: 20px;
		}

		.notice-icon svg {
			width: 36px;
			height: 36px;
		}

		.notice-content h3 {
			font-size: 1.1rem;
		}

		.notice-content p {
			font-size: 0.9rem;
		}

		.modal-info h2 {
			font-size: 1.5rem;
		}

		.modal-info p {
			font-size: 1rem;
		}
	}
</style>

